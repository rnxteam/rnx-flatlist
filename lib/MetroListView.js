'use strict';var _extends2=require('babel-runtime/helpers/extends');var _extends3=_interopRequireDefault(_extends2);var _classCallCheck2=require('babel-runtime/helpers/classCallCheck');var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require('babel-runtime/helpers/createClass');var _createClass3=_interopRequireDefault(_createClass2);var _possibleConstructorReturn2=require('babel-runtime/helpers/possibleConstructorReturn');var _possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2);var _inherits2=require('babel-runtime/helpers/inherits');var _inherits3=_interopRequireDefault(_inherits2);var _class,_temp2,_jsxFileName='src/MetroListView.js';var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactNative=require('react-native');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var invariant=require('fbjs/lib/invariant');var MetroListView=(_temp2=_class=function(_React$Component){(0,_inherits3.default)(MetroListView,_React$Component);function MetroListView(){var _ref,_this2=this;var _temp,_this,_ret;(0,_classCallCheck3.default)(this,MetroListView);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=(0,_possibleConstructorReturn3.default)(this,(_ref=MetroListView.__proto__||Object.getPrototypeOf(MetroListView)).call.apply(_ref,[this].concat(args))),_this),_this.state=_this._computeState(_this.props,{ds:new _reactNative.ListView.DataSource({rowHasChanged:function rowHasChanged(itemA,itemB){return true;},sectionHeaderHasChanged:function sectionHeaderHasChanged(){return true;},getSectionHeaderData:function getSectionHeaderData(dataBlob,sectionID){return _this.state.sectionHeaderData[sectionID];}}),sectionHeaderData:{}}),_this._captureRef=function(ref){_this._listRef=ref;},_this._renderFooter=function(){return _react2.default.createElement(_this2.props.FooterComponent,{key:'$footer',__source:{fileName:_jsxFileName,lineNumber:197}});},_this._renderRow=function(item,sectionID,rowID,highlightRow){return _this.props.renderItem({item:item,index:rowID});},_this._renderSectionHeader=function(section,sectionID){var renderSectionHeader=_this.props.renderSectionHeader;invariant(renderSectionHeader,'Must provide renderSectionHeader with sections prop');return renderSectionHeader({section:section});},_this._renderSeparator=function(sID,rID){return _react2.default.createElement(_this2.props.SeparatorComponent,{key:sID+rID,__source:{fileName:_jsxFileName,lineNumber:211}});},_temp),(0,_possibleConstructorReturn3.default)(_this,_ret);}(0,_createClass3.default)(MetroListView,[{key:'scrollToEnd',value:function scrollToEnd(params){throw new Error('scrollToEnd not supported in legacy ListView.');}},{key:'scrollToIndex',value:function scrollToIndex(params){throw new Error('scrollToIndex not supported in legacy ListView.');}},{key:'scrollToItem',value:function scrollToItem(params){throw new Error('scrollToItem not supported in legacy ListView.');}},{key:'scrollToLocation',value:function scrollToLocation(params){throw new Error('scrollToLocation not supported in legacy ListView.');}},{key:'scrollToOffset',value:function scrollToOffset(params){var animated=params.animated,offset=params.offset;this._listRef.scrollTo(this.props.horizontal?{x:offset,animated:animated}:{y:offset,animated:animated});}},{key:'getListRef',value:function getListRef(){return this._listRef;}},{key:'setNativeProps',value:function setNativeProps(props){if(this._listRef){this._listRef.setNativeProps(props);}}},{key:'componentWillReceiveProps',value:function componentWillReceiveProps(newProps){var _this3=this;this.setState(function(state){return _this3._computeState(newProps,state);});}},{key:'render',value:function render(){return _react2.default.createElement(_reactNative.ListView,(0,_extends3.default)({},this.props,{dataSource:this.state.ds,ref:this._captureRef,renderRow:this._renderRow,renderFooter:this.props.FooterComponent&&this._renderFooter,renderSectionHeader:this.props.sections&&this._renderSectionHeader,renderSeparator:this.props.SeparatorComponent&&this._renderSeparator,__source:{fileName:_jsxFileName,lineNumber:154}}));}},{key:'_computeState',value:function _computeState(props,state){var sectionHeaderData={};if(props.sections){invariant(!props.items,'Cannot have both sections and items props.');var sections={};props.sections.forEach(function(sectionIn,ii){var sectionID='s'+ii;sections[sectionID]=sectionIn.data;sectionHeaderData[sectionID]=sectionIn;});return{ds:state.ds.cloneWithRowsAndSections(sections),sectionHeaderData:sectionHeaderData};}else{invariant(!props.sections,'Cannot have both sections and items props.');return{ds:state.ds.cloneWithRows(props.items),sectionHeaderData:sectionHeaderData};}}}]);return MetroListView;}(_react2.default.Component),_class.defaultProps={keyExtractor:function keyExtractor(item,index){return item.key||String(index);},renderScrollComponent:function renderScrollComponent(props){if(props.onRefresh){return _react2.default.createElement(_reactNative.ScrollView,(0,_extends3.default)({},props,{refreshControl:_react2.default.createElement(_reactNative.RefreshControl,{refreshing:props.refreshing,onRefresh:props.onRefresh,__source:{fileName:_jsxFileName,lineNumber:122}}),__source:{fileName:_jsxFileName,lineNumber:115}}));}else{return _react2.default.createElement(_reactNative.ScrollView,(0,_extends3.default)({},props,{__source:{fileName:_jsxFileName,lineNumber:133}}));}}},_temp2);module.exports=MetroListView;